<!-- * * * * * * * * * * * * * * -->
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Project Euler</title>

    <!-- Theme (pick any from Prism site) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css">

    <!-- Prism core + autoloader + line-numbers -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"
            data-prismjs-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs/components/"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <style>
        table {
            border-collapse: collapse;
            width: 100%;
            font-family: system-ui, sans-serif;
            font-size: 14px;
        }

        th {
            background-color: #f5f5f5;
            text-align: left;
            font-weight: 600;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
        }

        tr:nth-child(even) {
            background-color: #fafafa;
        }

        tr:hover {
            background-color: #f0f8ff;
        }

        .hl-red      { background-color: red; }
        .hl-green    { background-color: green; }
        .hl-blue     { background-color: blue; }
        .hl-yellow   { background-color: yellow; }

        .hl-red-bg    { background-color: red; }
        .hl-green-bg  { background-color: green; }
        .hl-blue-bg   { background-color: blue; }
        .hl-yellow-bg { background-color: yellow; }

        .hl-red-fg    { color: red; }
        .hl-green-fg  { color: green; }
        .hl-blue-fg   { color: blue; }
        .hl-yellow-fg { color: yellow; }
        .hl-grey-fg   { color: grey; }
        .hl-black-fg  { color: black; }

        .comment {
            color: grey;
        }

        .red-underline {
            text-decoration-line: underline;
            text-decoration-color: red;
            text-decoration-thickness: 2px;
            text-underline-offset: 2px;
        }

        body {
            font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
            font-variant-ligatures: none;
        }

        ul > li {
            list-style-type: disc;
        }

        code {
            color: #24292e;
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: .375rem;
            padding: .15rem .35rem;
            font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
            font-size: 0.875rem;
            line-height: 1.4;
        }

        pre {
            margin: 1rem 0;
            padding: .8rem 1rem;
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: .5rem;
            overflow: auto;
            tab-size: 4;
        }

        pre code {
            display: block;
            padding: 0;
            background: transparent;
            border: 0;
            color: #24292e;
            font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            white-space: pre;
        }
    </style>
</head>
<!-- * * * * * * * * * * * * * * -->
<body>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<pre><code class="language-c line-numbers">#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stdbool.h&gt;

#define K (4)
#define HEIGHT (20)
#define WIDTH (20)
#define SIZE ((HEIGHT) * (WIDTH))

uint64_t Grid[SIZE] = {

    8, 2, 22, 97, 38, 15, 0, 40, 0, 75, 4, 5, 7, 78, 52, 12, 50, 77, 91, 8,
    49, 49, 99, 40, 17, 81, 18, 57, 60, 87, 17, 40, 98, 43, 69, 48, 4, 56, 62, 0,
    81, 49, 31, 73, 55, 79, 14, 29, 93, 71, 40, 67, 53, 88, 30, 3, 49, 13, 36, 65,
    52, 70, 95, 23, 4, 60, 11, 42, 69, 24, 68, 56, 1, 32, 56, 71, 37, 2, 36, 91,
    22, 31, 16, 71, 51, 67, 63, 89, 41, 92, 36, 54, 22, 40, 40, 28, 66, 33, 13, 80,
    24, 47, 32, 60, 99, 3, 45, 2, 44, 75, 33, 53, 78, 36, 84, 20, 35, 17, 12, 50,
    32, 98, 81, 28, 64, 23, 67, 10, 26, 38, 40, 67, 59, 54, 70, 66, 18, 38, 64, 70,
    67, 26, 20, 68, 2, 62, 12, 20, 95, 63, 94, 39, 63, 8, 40, 91, 66, 49, 94, 21,
    24, 55, 58, 5, 66, 73, 99, 26, 97, 17, 78, 78, 96, 83, 14, 88, 34, 89, 63, 72,
    21, 36, 23, 9, 75, 0, 76, 44, 20, 45, 35, 14, 0, 61, 33, 97, 34, 31, 33, 95,
    78, 17, 53, 28, 22, 75, 31, 67, 15, 94, 3, 80, 4, 62, 16, 14, 9, 53, 56, 92,
    16, 39, 5, 42, 96, 35, 31, 47, 55, 58, 88, 24, 0, 17, 54, 24, 36, 29, 85, 57,
    86, 56, 0, 48, 35, 71, 89, 7, 5, 44, 44, 37, 44, 60, 21, 58, 51, 54, 17, 58,
    19, 80, 81, 68, 5, 94, 47, 69, 28, 73, 92, 13, 86, 52, 17, 77, 4, 89, 55, 40,
    4, 52, 8, 83, 97, 35, 99, 16, 7, 97, 57, 32, 16, 26, 26, 79, 33, 27, 98, 66,
    88, 36, 68, 87, 57, 62, 20, 72, 3, 46, 33, 67, 46, 55, 12, 32, 63, 93, 53, 69,
    4, 42, 16, 73, 38, 25, 39, 11, 24, 94, 72, 18, 8, 46, 29, 32, 40, 62, 76, 36,
    20, 69, 36, 41, 72, 30, 23, 88, 34, 62, 99, 69, 82, 67, 59, 85, 74, 4, 36, 16,
    20, 73, 35, 29, 78, 31, 90, 1, 74, 31, 49, 71, 48, 86, 81, 16, 23, 57, 5, 54,
    1, 70, 54, 71, 83, 51, 54, 69, 16, 92, 33, 48, 61, 43, 52, 1, 89, 19, 67, 48,

};

// x - horizontal (0-indexed)
// y - veritcal   (0-indexed)
uint64_t GridAt(uint64_t x, uint64_t y)
{
    uint64_t idx = x + (y * WIDTH);
    return Grid[idx];
}

uint64_t Max2(uint64_t a, uint64_t b)
{
    return (a &gt; b) ? a : b;
}

uint64_t Max3(uint64_t a, uint64_t b, uint64_t c)
{
    uint64_t max = Max2(a, b);
    return (max &gt; c) ? max : c;
}

uint64_t Max4(uint64_t a, uint64_t b, uint64_t c, uint64_t d)
{
    uint64_t max = Max3(a, b, c);
    return (max &gt; d) ? max : d;
}

uint64_t Max5(uint64_t a, uint64_t b, uint64_t c, uint64_t d, uint64_t e)
{
    uint64_t max = Max4(a, b, c, d);
    return (max &gt; e) ? max : e;
}

uint64_t Max6(uint64_t a, uint64_t b, uint64_t c, uint64_t d, uint64_t e, uint64_t f)
{
    uint64_t max = Max5(a, b, c, d, e);
    return (max &gt; f) ? max : f;
}

void Solve()
{
    uint64_t product = 0;

    for (uint64_t w = 0; w &lt; WIDTH; w++)
    {
        for (uint64_t h = 0; h &lt; HEIGHT; h++)
        {
            uint64_t up       = 0;
            uint64_t down     = 0;
            uint64_t left     = 0;
            uint64_t right    = 0;
            uint64_t diag1    = 0;
            uint64_t diag2    = 0;

            // Edge cases:
            bool isUpAvailable      = (h &gt;= K - 1);
            bool isDownAvailable    = (h &lt;= HEIGHT - K);
            bool isLeftAvailable    = (w &gt;= K - 1);
            bool isRightAvailable   = (w &lt;= WIDTH - K);
            bool isDiag1Available   = (isDownAvailable &amp;&amp; isRightAvailable);
            bool isDiag2Available   = (isDownAvailable &amp;&amp; isLeftAvailable);

            if (isUpAvailable)
            {
                up = GridAt(w, h) * GridAt(w, h-1) * GridAt(w, h-2) * GridAt(w, h-3);
            }

            if (isDownAvailable)
            {
                down = GridAt(w, h) * GridAt(w, h+1) * GridAt(w, h+2) * GridAt(w, h+3);
            }

            if (isLeftAvailable)
            {
                left = GridAt(w, h) * GridAt(w-1, h) * GridAt(w-2, h) * GridAt(w-3, h);
            }

            if (isRightAvailable)
            {
                right = GridAt(w, h) * GridAt(w+1, h) * GridAt(w+2, h) * GridAt(w+3, h);
            }

            if (isDiag1Available)
            {
                diag1 = GridAt(w, h) * GridAt(w+1, h+1) * GridAt(w+2, h+2) * GridAt(w+3, h+3);
            }

            if (isDiag2Available)
            {
                diag2 = GridAt(w, h) * GridAt(w-1, h+1) * GridAt(w-2, h+2) * GridAt(w-3, h+3);
            }

            uint64_t max = Max6(up, down, left, right, diag1, diag2);
            if (max &gt; product)
            {
                product = max;
            }
        }
    }

    fprintf(stdout, "The greatest product of four adjacent numbers in the same direction in the 20 x 20 grid is %lu\n", product);
}

int main()
{
    Solve();
    return 0;
}
</code></pre>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<footer>
    <p>&copy; 2025 Hwangfucius. All rights reserved.</p>
</footer>
<!-- * * * * * * * * * * * * * * -->

</body>
<!-- * * * * * * * * * * * * * * -->
</html>
<!-- * * * * * * * * * * * * * * -->
